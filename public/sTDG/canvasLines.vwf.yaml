--- 
extends: http://vwf.example.com/kinetic/group.vwf
properties:
  lineColor: "#000000"
  lineCount: 0
  visible: 'inherit'
methods:
  startNewLine:
  continueLine:
  synchronizedDraw:
scripts:
- |
  this.startNewLine = function( startPoint, endPoint, drawMode, pointSize, penColor ) {
    this.lineCount++;
    this.children.create( "line_" + this.lineCount, {
      extends: "http://vwf.example.com/kinetic/line.vwf",
      properties: {
        points: startPoint.concat( endPoint ),
        stroke: penColor,
        strokeWidth: pointSize,
      }   
    } );
  }

  this.continueLine = function( newPoint ) {
    var lineName = "line_" + this.lineCount;
    this[ lineName ].points = this[ lineName ].points.concat( newPoint );
  }

  this.synchronizedDraw = function( startPoint, endPoint, drawMode, pointSize, penColor) {
    // TODO: We would like to be able to organize shapes into groups, but right now we have a 
    //       bug where shapes under a group node do not show up in the scene
    // this.children.create( "line_" + this.lineCount++, {
    this.parent.children.create( "line_" + this.lineCount++, {
      extends: "http://vwf.example.com/kinetic/line.vwf",
      properties: {
        points: startPoint.concat( endPoint ),
        stroke: penColor,
        strokeWidth: pointSize,
      }   
    } );
    // this.lineSegments.push( [ startPoint, endPoint, drawMode, pointSize, penColor ] );
    // this.lineSegments = this.lineSegments;
  }

  //@ sourceURL=canvasLines.vwf